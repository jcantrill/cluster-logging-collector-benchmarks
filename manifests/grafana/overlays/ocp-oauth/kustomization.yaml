apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: openshift-monitoring
generatorOptions:
  disableNameSuffixHash: true
resources:
  - ../../base
  - clusterrolebinding.yaml
  - route.yaml
  - serviceaccount.yaml
patchesStrategicMerge:
  - patch_deployment_env.yaml
  - patch_deployment_oauth.yaml
  - patch_service_tls.yaml
configMapGenerator:
  - name: grafana-config
    literals:
    - CLUSTER_MONITORING_THANOS_QUERIER_OAUTH_ADDRESS=thanos-querier.openshift-monitoring.svc.cluster.local:9091/
    - CLUSTER_ROUTES_BASE=jcantril-golangfail.devcluster.openshift.com
    - GRAFANA_OAUTH_CLIENT_ID=system:serviceaccount:openshift-monitoring:grafana
    files:
      - grafana/config.ini
  - name: grafana-datasources
    files:
      - grafana/datasources.yaml
  - name: grafana-providers
    files:
      - grafana/providers.yaml
  - name: grafana-dashboards
    files:
    - grafana/collector-dashboard.json